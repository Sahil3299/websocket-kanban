{"ast":null,"code":"import { io } from 'socket.io-client';\nimport { getToken } from './auth';\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\nlet socket = null;\nexport const initializeSocket = token => {\n  var _socket;\n  if ((_socket = socket) !== null && _socket !== void 0 && _socket.connected) {\n    socket.disconnect();\n  }\n  socket = io(SOCKET_URL, {\n    auth: {\n      token\n    },\n    reconnection: true,\n    reconnectionAttempts: 5,\n    reconnectionDelay: 1000\n  });\n  socket.on('connect', () => {\n    console.log('Connected to WebSocket server');\n  });\n  socket.on('disconnect', () => {\n    console.log('Disconnected from WebSocket server');\n  });\n  socket.on('connect_error', error => {\n    console.error('Connection error:', error);\n  });\n  socket.on('error', error => {\n    console.error('Socket error:', error);\n  });\n  return socket;\n};\nexport const getSocket = () => {\n  if (!socket) {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      throw new Error('No authentication token found');\n    }\n    initializeSocket(token);\n  }\n  return socket;\n};\nexport const disconnectSocket = () => {\n  if (socket) {\n    socket.disconnect();\n    socket = null;\n  }\n};","map":{"version":3,"names":["io","getToken","SOCKET_URL","process","env","REACT_APP_SOCKET_URL","socket","initializeSocket","token","_socket","connected","disconnect","auth","reconnection","reconnectionAttempts","reconnectionDelay","on","console","log","error","getSocket","localStorage","getItem","Error","disconnectSocket"],"sources":["C:/websocket-kanban-vitest-playwright-2026-main/frontend/src/services/socket.js"],"sourcesContent":["import { io } from 'socket.io-client';\r\nimport { getToken } from './auth';\r\n\r\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\r\n\r\nlet socket = null;\r\n\r\nexport const initializeSocket = (token) => {\r\n  if (socket?.connected) {\r\n    socket.disconnect();\r\n  }\r\n\r\n  socket = io(SOCKET_URL, {\r\n    auth: {\r\n      token\r\n    },\r\n    reconnection: true,\r\n    reconnectionAttempts: 5,\r\n    reconnectionDelay: 1000,\r\n  });\r\n\r\n  socket.on('connect', () => {\r\n    console.log('Connected to WebSocket server');\r\n  });\r\n\r\n  socket.on('disconnect', () => {\r\n    console.log('Disconnected from WebSocket server');\r\n  });\r\n\r\n  socket.on('connect_error', (error) => {\r\n    console.error('Connection error:', error);\r\n  });\r\n\r\n  socket.on('error', (error) => {\r\n    console.error('Socket error:', error);\r\n  });\r\n\r\n  return socket;\r\n};\r\n\r\nexport const getSocket = () => {\r\n  if (!socket) {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      throw new Error('No authentication token found');\r\n    }\r\n    initializeSocket(token);\r\n  }\r\n  return socket;\r\n};\r\n\r\nexport const disconnectSocket = () => {\r\n  if (socket) {\r\n    socket.disconnect();\r\n    socket = null;\r\n  }\r\n};"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AACrC,SAASC,QAAQ,QAAQ,QAAQ;AAEjC,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB,IAAI,uBAAuB;AAE9E,IAAIC,MAAM,GAAG,IAAI;AAEjB,OAAO,MAAMC,gBAAgB,GAAIC,KAAK,IAAK;EAAA,IAAAC,OAAA;EACzC,KAAAA,OAAA,GAAIH,MAAM,cAAAG,OAAA,eAANA,OAAA,CAAQC,SAAS,EAAE;IACrBJ,MAAM,CAACK,UAAU,CAAC,CAAC;EACrB;EAEAL,MAAM,GAAGN,EAAE,CAACE,UAAU,EAAE;IACtBU,IAAI,EAAE;MACJJ;IACF,CAAC;IACDK,YAAY,EAAE,IAAI;IAClBC,oBAAoB,EAAE,CAAC;IACvBC,iBAAiB,EAAE;EACrB,CAAC,CAAC;EAEFT,MAAM,CAACU,EAAE,CAAC,SAAS,EAAE,MAAM;IACzBC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;EAC9C,CAAC,CAAC;EAEFZ,MAAM,CAACU,EAAE,CAAC,YAAY,EAAE,MAAM;IAC5BC,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC;EACnD,CAAC,CAAC;EAEFZ,MAAM,CAACU,EAAE,CAAC,eAAe,EAAGG,KAAK,IAAK;IACpCF,OAAO,CAACE,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;EAC3C,CAAC,CAAC;EAEFb,MAAM,CAACU,EAAE,CAAC,OAAO,EAAGG,KAAK,IAAK;IAC5BF,OAAO,CAACE,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;EACvC,CAAC,CAAC;EAEF,OAAOb,MAAM;AACf,CAAC;AAED,OAAO,MAAMc,SAAS,GAAGA,CAAA,KAAM;EAC7B,IAAI,CAACd,MAAM,EAAE;IACX,MAAME,KAAK,GAAGa,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACd,KAAK,EAAE;MACV,MAAM,IAAIe,KAAK,CAAC,+BAA+B,CAAC;IAClD;IACAhB,gBAAgB,CAACC,KAAK,CAAC;EACzB;EACA,OAAOF,MAAM;AACf,CAAC;AAED,OAAO,MAAMkB,gBAAgB,GAAGA,CAAA,KAAM;EACpC,IAAIlB,MAAM,EAAE;IACVA,MAAM,CAACK,UAAU,CAAC,CAAC;IACnBL,MAAM,GAAG,IAAI;EACf;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}